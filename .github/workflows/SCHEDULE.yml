name: Update README.md

on:
  push:
    branches: [ "main" ]
  schedule:
    - cron: "0 1 * * *"

jobs:
  update-readme:
    runs-on: ubuntu-latest

    steps:
     - name: Checkout repository
       uses: actions/checkout@v2
       with:
          ssh-key: ${{ secrets.SSH_PRIVATE_KEY }}
      
     - run: |         
         git config --global user.name "bot-kevnanrd"
         git config --global user.email "londonokevin9@gmail.com"

     - run: |
         git branch patch-1
         
         echo "Today is $(date +'%Y-%m-%d %H:%M:%S')" >> README.md
         
         git add README.md
         git diff --quiet && git diff --staged --quiet || git commit -m "[bot] Update README with latest info"
         
     - run: |
         git push
